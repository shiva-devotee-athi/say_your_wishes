<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="./config.js" defer></script>
    <title>Your Wish</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta property="og:site_name" content="Your Greetings">
    <meta property="og:title" content="April-02 Sankareshwari BirthDay">
    <meta property="og:description" content="This is the form. Send your greetings to Sankareshwari on his birthday. Send your greetings to sankareshwari and make her happy on her special day.">
    <meta property="og:image" content="https://asset.cloudinary.com/deu93r3up/64fd28e6acc801678adafdf105a71470">
    <meta property="og:type" content="website">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="300">
    <meta property="og:image:height" content="300">
    <meta property="og:url" content="https://sankareshwari-bday-wishes.onrender.com">    

    <link rel="apple-touch-icon" sizes="180x180" href="fav_icon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="fav_icon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="fav_icon/favicon-16x16.png" />
    <link rel="manifest" href="fav_icon/site.webmanifest" />
    <link rel="mask-icon" href="fav_icon/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#a4be7b" />
    <meta name="theme-color" content="#ffffff" />
    <link
      href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/notiflix@3.2.7/src/notiflix.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <section class="ftco-section">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-12 col-lg-10">
            <div class="wrap d-md-flex">
              <div class="img" style="background-image: url(images/bg-2.png)">
                <img
                  src="./images/bg-2.png"
                  class="img"
                  loading="lazy"
                  width="100%"
                  style="width: 100%; height: 100%; object-fit: cover"
                  alt="card"
                />
              </div>
              <div class="login-wrap p-4 p-md-5">
                <form id="multiPartForm">
                  <div class="form-group mb-3">
                    <label class="label" for="imageInput">Your Image</label>
                    <input
                      type="file"
                      class="form-control"
                      id="imageInput"
                      name="image"
                      accept="image/*"
                      placeholder="Select Your Image"
                      required
                    />
                  </div>
                  <div class="form-group mb-3">
                    <label class="label" for="nameInput">Your Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="nameInput"
                      name="friendName"
                      placeholder="Enter Your Name"
                      required
                    />
                  </div>
                  <div class="form-group mb-3">
                    <label class="label" for="wishInput">Your Wish</label>
                    <textarea
                      class="form-control"
                      placeholder="Enter Your Wish here.."
                      id="wishInput"
                      name="wish"
                      rows="3"
                      required
                    ></textarea>
                  </div>
                  <div class="form-group mb-3">
                    <label class="label" for="wishInput">Choose Card</label>
                    <div
                      class="form-group d-flex"
                      style="flex-wrap: wrap; gap: 30px"
                    >
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="greetingCard"
                          id="radioOption1"
                          value="card_1"
                          checked
                        />
                        <label class="form-check-label" for="radioOption1">
                          Card-1
                        </label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="greetingCard"
                          id="radioOption2"
                          value="card_2"
                        />
                        <label class="form-check-label" for="radioOption2">
                          Card-2
                        </label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="greetingCard"
                          id="radioOption3"
                          value="card_3"
                        />
                        <label class="form-check-label" for="radioOption3">
                          Card-3
                        </label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input
                          class="form-check-input"
                          type="radio"
                          name="greetingCard"
                          id="radioOption4"
                          value="card_4"
                        />
                        <label class="form-check-label" for="radioOption4">
                          Card-4
                        </label>
                      </div>
                      <div>
                        <a
                          href="#"
                          class="badge badge-primary"
                          data-bs-toggle="modal"
                          data-bs-target="#cardModal"
                          style="padding: 8px"
                        >
                          <i
                            class="fa fa-eye"
                            style="margin-right: 5px"
                            aria-hidden="true"
                          ></i>
                          view cards</a
                        >
                      </div>
                    </div>
                  </div>
                  <div class="form-group mt-6">
                    <button
                      id="submitBtn"
                      class="form-control btn btn-primary rounded submit px-3"
                      onclick="(e)=>{submitForm(e)}"
                    >
                      Submit
                    </button>
                  </div>
                </form>

                <div
                  class="modal fade"
                  id="cardModal"
                  tabindex="-1"
                  aria-labelledby="exampleModalLabel"
                  aria-hidden="true"
                >
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-body">
                        <div class="owl-carousel owl-theme">
                          <div class="media-29101">
                            <img src="./images/card_1.png" alt="Card-1" />
                            <p>Card-1</p>
                          </div>
                          <div class="media-29101">
                            <img src="./images/card_2.png" alt="Card-2" />
                            <p>Card-2</p>
                          </div>
                          <div class="media-29101">
                            <img src="./images/card_3.png" alt="Card-3" />
                            <p>Card-3</p>
                          </div>
                          <div class="media-29101">
                            <img src="./images/card_4.png" alt="Card-4" />
                            <p>Card-4</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="./js/carasol.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/notiflix@3.2.7/dist/notiflix-aio-3.2.7.min.js"></script>
    <script>
      var tooltipTriggerList = [].slice.call(
        document.querySelectorAll('[data-bs-toggle="tooltip"]')
      );
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-firestore.js";
      import {
        getStorage,
        ref,
        uploadBytes,
      } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-storage.js";

      console.log(window.env.API_KEY);
      var firebaseConfig = {
        apiKey: window.env.API_KEY,
        authDomain: window.env.AUTH_DOMAIN,
        projectId: window.env.PROJECT_ID,
        storageBucket: window.env.STORAGE_BUCKET,
        messagingSenderId: window.env.MESSAGE_ID,
        appId: window.env.APP_ID,
      };

      var app = initializeApp(firebaseConfig);
      var storage = getStorage(app);

      function uploadFile() {
        var fileInput = document.getElementById("imageInput");
        var file = fileInput.files[0];

        var storageRef = ref(
          storage,
          "images/" + new Date().getTime() + "_" + file.name
        );

        uploadBytes(storageRef, file)
          .then((snapshot) => {
            console.log("File uploaded successfully:", snapshot);
          })
          .catch((error) => {
            console.error("Error uploading file:", error);
          });
      }

      document
        .getElementById("imageInput")
        .addEventListener("change", uploadFile);
    </script>

    <script>
      Notiflix.Notify.init({
        width: "300px",
        position: "right-top",
        closeButton: true,
        fontAwesomeIconStyle: "basic",
        fontAwesomeIconSize: "25px",
        success: {
          background: "#7edf4a",
          textColor: "#fff",
          childClassName: "notiflix-notify-success",
          notiflixIconColor: "rgb(255 255 255)",
          fontAwesomeClassName: "fas fa-circle-check",
          fontAwesomeIconColor: "rgb(255 255 255)",
          backOverlayColor: "rgba(50,198,130,0.2)",
        },
        failure: {
          background: "#e53430",
          textColor: "#fff",
          childClassName: "notiflix-notify-failure",
          notiflixIconColor: "rgb(255 255 255)",
          fontAwesomeClassName: "fa-solid fa-circle-xmark",
          fontAwesomeIconColor: "rgb(255 255 255)",
          backOverlayColor: "rgba(255,85,73,0.2)",
        },
      });
      const thisForm = document.getElementById("multiPartForm");
      thisForm.addEventListener("submit", async function (e) {
        e.preventDefault();

        const formData = new FormData(thisForm);

        const requestData = {
          image: formData.get("image"),
          friendName: formData.get("friendName"),
          wish: formData.get("wish"),
          greetingCard: formData.get("greetingCard"),
        };

        try {
          Notiflix.Loading.dots();
          const response = await axios.post(
            "https://shri-bday-app.onrender.com/api/addWishes",
            requestData,
            {
              headers: {
                "Content-Type": "multipart/form-data",
              },
            }
          );
          Notiflix.Loading.remove();
          if (response.data.status === true) {
            Notiflix.Notify.success(`${response.data.message}`);
            document.getElementById("multiPartForm").reset();
          } else if (response.data.status === false) {
            Notiflix.Notify.failure(`${response.data.message}`);
          }
        } catch (error) {
          Notiflix.Loading.remove();
          console.error("Error:", error);
        }
      });
    </script>
  </body>
</html>
